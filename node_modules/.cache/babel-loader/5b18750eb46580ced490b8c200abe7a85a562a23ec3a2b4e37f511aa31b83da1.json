{"ast":null,"code":"import { createAsyncThunk, createReducer } from \"@reduxjs/toolkit\";\nimport { addToCart, removeFromCart, toggleEditModal, setCurrentProduct, changeProducts, deleteProduct, toggleCartModal, changeAmountInCart } from \"./actions\";\nexport const getUSD = createAsyncThunk(\"\", async () => {\n  const response = await axios.get(\"https://6400bd3663e89b0913b5f740.mockapi.io/contacts\");\n  return response.data;\n});\nexport const getRUB = createAsyncThunk(\"\", async () => {\n  const response = await axios.get(\"https://6400bd3663e89b0913b5f740.mockapi.io/contacts\");\n  return response.data;\n});\nexport const labReducer = createReducer({\n  products: [{\n    id: 1,\n    name: \"Macbook Pro\",\n    price: \"2500\",\n    currency: \"$\",\n    img: \"https://i-center.by/images/o/apple-macbook-pro-13-m2-2022-mneh3_1.jpg\"\n  }, {\n    id: 2,\n    name: \"Asus ROG Gaming\",\n    price: \"1000\",\n    currency: \"$\",\n    img: \"https://i-center.by/images/o/apple-macbook-pro-13-m2-2022-mneh3_1.jpg\"\n  }, {\n    id: 3,\n    name: \"Amazon Kindle\",\n    price: \"150\",\n    currency: \"$\",\n    img: \"https://i-center.by/images/o/apple-macbook-pro-13-m2-2022-mneh3_1.jpg\"\n  }],\n  cart: [],\n  showEditModal: false,\n  currentProduct: {},\n  showCartModal: false,\n  USD: null,\n  RUB: null\n}, builder => builder.addCase(addToCart, (state, action) => {\n  var _state$cart$find, _state$cart$find2;\n  return {\n    ...state,\n    cart: state.cart.findIndex(product => product.id === action.payload.id) !== -1 ? [...state.cart.slice(0, state.cart.indexOf(state.cart.find(product => product.id === action.payload.id))), {\n      ...action.payload,\n      amount: parseInt(((_state$cart$find = state.cart.find(product => product.id === action.payload.id)) === null || _state$cart$find === void 0 ? void 0 : _state$cart$find.amount) || 0) + 1\n    }, ...state.cart.slice(state.cart.indexOf(state.cart.find(product => product.id === action.payload.id)) + 1, state.cart.length)] : [...state.cart.filter(product => product.id !== action.payload.id), {\n      ...action.payload,\n      amount: parseInt(((_state$cart$find2 = state.cart.find(product => product.id === action.payload.id)) === null || _state$cart$find2 === void 0 ? void 0 : _state$cart$find2.amount) || 0) + 1\n    }]\n  };\n}).addCase(removeFromCart, (state, action) => ({\n  ...state,\n  cart: state.cart.filter(product => product.id !== action.payload.id)\n})).addCase(toggleEditModal, state => ({\n  ...state,\n  showEditModal: !state.showEditModal\n})).addCase(setCurrentProduct, (state, action) => ({\n  ...state,\n  currentProduct: action.payload\n})).addCase(changeProducts, (state, action) => ({\n  ...state,\n  products: [...state.products.filter(elt => elt.id !== action.payload.id), action.payload].sort((a, b) => {\n    if (a.id > b.id) {\n      return 1;\n    }\n    if (a.id < b.id) {\n      return -1;\n    }\n    return 0;\n  })\n})).addCase(deleteProduct, (state, action) => ({\n  ...state,\n  products: [state.products.filter(product => product.id !== action.payload.id)]\n})).addCase(toggleCartModal, state => ({\n  ...state,\n  showCartModal: !state.showCartModal\n})).addCase(changeAmountInCart, (state, action) => ({\n  ...state,\n  cart: [...state.cart.slice(0, state.cart.indexOf(state.cart.find(product => product.id === action.payload.id))), action.payload, ...state.cart.slice(state.cart.indexOf(state.cart.find(product => product.id === action.payload.id)) + 1, state.cart.length)]\n})));","map":{"version":3,"names":["createAsyncThunk","createReducer","addToCart","removeFromCart","toggleEditModal","setCurrentProduct","changeProducts","deleteProduct","toggleCartModal","changeAmountInCart","getUSD","response","axios","get","data","getRUB","labReducer","products","id","name","price","currency","img","cart","showEditModal","currentProduct","showCartModal","USD","RUB","builder","addCase","state","action","_state$cart$find","_state$cart$find2","findIndex","product","payload","slice","indexOf","find","amount","parseInt","length","filter","elt","sort","a","b"],"sources":["C:/study/курсы/react/homework-with-router/src/lab-4/redux/reducer.js"],"sourcesContent":["import { createAsyncThunk, createReducer } from \"@reduxjs/toolkit\";\r\nimport {\r\n  addToCart,\r\n  removeFromCart,\r\n  toggleEditModal,\r\n  setCurrentProduct,\r\n  changeProducts,\r\n  deleteProduct,\r\n  toggleCartModal,\r\n  changeAmountInCart,\r\n} from \"./actions\";\r\n\r\nexport const getUSD = createAsyncThunk(\"\",  async () => {\r\n  const response = await axios.get(\r\n    \"https://6400bd3663e89b0913b5f740.mockapi.io/contacts\"\r\n  );\r\n  return response.data;\r\n});\r\n\r\nexport const getRUB = createAsyncThunk(\"\",  async () => {\r\n  const response = await axios.get(\r\n    \"https://6400bd3663e89b0913b5f740.mockapi.io/contacts\"\r\n  );\r\n  return response.data;\r\n});\r\n\r\n\r\nexport const labReducer = createReducer(\r\n  {\r\n    products: [\r\n      {\r\n        id: 1,\r\n        name: \"Macbook Pro\",\r\n        price: \"2500\",\r\n        currency: \"$\",\r\n        img: \"https://i-center.by/images/o/apple-macbook-pro-13-m2-2022-mneh3_1.jpg\",\r\n      },\r\n      {\r\n        id: 2,\r\n        name: \"Asus ROG Gaming\",\r\n        price: \"1000\",\r\n        currency: \"$\",\r\n        img: \"https://i-center.by/images/o/apple-macbook-pro-13-m2-2022-mneh3_1.jpg\",\r\n      },\r\n      {\r\n        id: 3,\r\n        name: \"Amazon Kindle\",\r\n        price: \"150\",\r\n        currency: \"$\",\r\n        img: \"https://i-center.by/images/o/apple-macbook-pro-13-m2-2022-mneh3_1.jpg\",\r\n      },\r\n    ],\r\n    cart: [],\r\n    showEditModal: false,\r\n    currentProduct: {},\r\n    showCartModal: false,\r\n    USD: null,\r\n    RUB: null,\r\n  },\r\n  (builder) =>\r\n    builder\r\n      .addCase(addToCart, (state, action) => ({\r\n        ...state,\r\n        cart:\r\n          state.cart.findIndex((product) => product.id === action.payload.id) !== -1\r\n            ? [\r\n                ...state.cart.slice(\r\n                  0,\r\n                  state.cart.indexOf(\r\n                    state.cart.find(\r\n                      (product) => product.id === action.payload.id\r\n                    )\r\n                  )\r\n                ),\r\n                {\r\n                  ...action.payload,\r\n                  amount:\r\n                    parseInt(\r\n                      state.cart.find(\r\n                        (product) => product.id === action.payload.id\r\n                      )?.amount || 0\r\n                    ) + 1,\r\n                },\r\n                ...state.cart.slice(\r\n                  state.cart.indexOf(\r\n                    state.cart.find(\r\n                      (product) => product.id === action.payload.id\r\n                    )\r\n                  ) + 1,\r\n                  state.cart.length\r\n                ),\r\n              ]\r\n            : [\r\n                ...state.cart.filter(\r\n                  (product) => product.id !== action.payload.id\r\n                ),\r\n                {\r\n                  ...action.payload,\r\n                  amount:\r\n                    parseInt(\r\n                      state.cart.find(\r\n                        (product) => product.id === action.payload.id\r\n                      )?.amount || 0\r\n                    ) + 1,\r\n                },\r\n              ],\r\n      }))\r\n      .addCase(removeFromCart, (state, action) => ({\r\n        ...state,\r\n        cart: state.cart.filter((product) => product.id !== action.payload.id),\r\n      }))\r\n      .addCase(toggleEditModal, (state) => ({\r\n        ...state,\r\n        showEditModal: !state.showEditModal,\r\n      }))\r\n      .addCase(setCurrentProduct, (state, action) => ({\r\n        ...state,\r\n        currentProduct: action.payload,\r\n      }))\r\n      .addCase(changeProducts, (state, action) => ({\r\n        ...state,\r\n        products: [\r\n          ...state.products.filter((elt) => elt.id !== action.payload.id),\r\n          action.payload,\r\n        ].sort((a, b) => {\r\n          if (a.id > b.id) {\r\n            return 1;\r\n          }\r\n          if (a.id < b.id) {\r\n            return -1;\r\n          }\r\n          return 0;\r\n        }),\r\n      }))\r\n      .addCase(deleteProduct, (state, action) => ({\r\n        ...state,\r\n        products: [\r\n          state.products.filter((product) => product.id !== action.payload.id),\r\n        ],\r\n      }))\r\n      .addCase(toggleCartModal, (state) => ({\r\n        ...state,\r\n        showCartModal: !state.showCartModal,\r\n      }))\r\n      .addCase(changeAmountInCart, (state, action) => ({\r\n        ...state,\r\n        cart: [\r\n          ...state.cart.slice(\r\n            0,\r\n            state.cart.indexOf(\r\n              state.cart.find((product) => product.id === action.payload.id)\r\n            )\r\n          ),\r\n          action.payload,\r\n          ...state.cart.slice(\r\n            state.cart.indexOf(\r\n              state.cart.find((product) => product.id === action.payload.id)\r\n            ) + 1,\r\n            state.cart.length\r\n          ),\r\n        ],\r\n      }))\r\n);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}