{"ast":null,"code":"import { createReducer } from \"@reduxjs/toolkit\";\nimport { addToCart, removeFromCart, toggleEditModal, setCurrentProduct, changeProducts, deleteProduct, toggleCartModal, changeAmountInCart } from \"./actions\";\nexport const labReducer = createReducer({\n  products: [{\n    id: 1,\n    name: \"Macbook Pro\",\n    price: \"2500\",\n    currency: \"$\",\n    img: \"https://i-center.by/images/o/apple-macbook-pro-13-m2-2022-mneh3_1.jpg\"\n  }, {\n    id: 2,\n    name: \"Asus ROG Gaming\",\n    price: \"1000\",\n    currency: \"$\",\n    img: \"https://i-center.by/images/o/apple-macbook-pro-13-m2-2022-mneh3_1.jpg\"\n  }, {\n    id: 3,\n    name: \"Amazon Kindle\",\n    price: \"150\",\n    currency: \"$\",\n    img: \"https://i-center.by/images/o/apple-macbook-pro-13-m2-2022-mneh3_1.jpg\"\n  }],\n  cart: [],\n  showEditModal: false,\n  currentProduct: {},\n  showCartModal: false\n}, builder => builder.addCase(addToCart, (state, action) => ({\n  ...state,\n  cart: [...state.cart.filter(product => product.id !== action.payload.id), {\n    ...action.payload,\n    amount: ~~action.payload.amount + 1\n  }]\n})).addCase(removeFromCart, (state, action) => ({\n  ...state,\n  cart: state.cart.filter(product => product.id !== action.payload.id)\n})).addCase(toggleEditModal, state => ({\n  ...state,\n  showEditModal: !state.showEditModal\n})).addCase(setCurrentProduct, (state, action) => ({\n  ...state,\n  currentProduct: action.payload\n})).addCase(changeProducts, (state, action) => ({\n  ...state,\n  products: [...state.products.filter(elt => elt.id !== action.payload.id), action.payload].sort((a, b) => {\n    if (a.id > b.id) {\n      return 1;\n    }\n    if (a.id < b.id) {\n      return -1;\n    }\n    return 0;\n  })\n})).addCase(deleteProduct, (state, action) => ({\n  ...state,\n  products: [state.products.filter(product => product.id !== action.payload.id)]\n})).addCase(toggleCartModal, state => ({\n  ...state,\n  showCartModal: !state.showCartModal\n})).addCase(changeAmountInCart, (state, action) => ({\n  ...state,\n  cart: [...state.cart.slice(0, state.cart.indexOf(state.cart.find(product => product.id === action.payload.id))), action.payload, ...state.cart.slice(state.cart.indexOf(state.cart.find(product => product.id === action.payload.id)) + 1, state.cart.length)]\n})));","map":{"version":3,"names":["createReducer","addToCart","removeFromCart","toggleEditModal","setCurrentProduct","changeProducts","deleteProduct","toggleCartModal","changeAmountInCart","labReducer","products","id","name","price","currency","img","cart","showEditModal","currentProduct","showCartModal","builder","addCase","state","action","filter","product","payload","amount","elt","sort","a","b","slice","indexOf","find","length"],"sources":["C:/study/курсы/react/homework-with-router/src/lab-4/redux/reducer.js"],"sourcesContent":["import { createReducer } from \"@reduxjs/toolkit\";\r\nimport {\r\n  addToCart,\r\n  removeFromCart,\r\n  toggleEditModal,\r\n  setCurrentProduct,\r\n  changeProducts,\r\n  deleteProduct,\r\n  toggleCartModal,\r\n  changeAmountInCart,\r\n} from \"./actions\";\r\n\r\nexport const labReducer = createReducer(\r\n  {\r\n    products: [\r\n      {\r\n        id: 1,\r\n        name: \"Macbook Pro\",\r\n        price: \"2500\",\r\n        currency: \"$\",\r\n        img: \"https://i-center.by/images/o/apple-macbook-pro-13-m2-2022-mneh3_1.jpg\",\r\n      },\r\n      {\r\n        id: 2,\r\n        name: \"Asus ROG Gaming\",\r\n        price: \"1000\",\r\n        currency: \"$\",\r\n        img: \"https://i-center.by/images/o/apple-macbook-pro-13-m2-2022-mneh3_1.jpg\",\r\n      },\r\n      {\r\n        id: 3,\r\n        name: \"Amazon Kindle\",\r\n        price: \"150\",\r\n        currency: \"$\",\r\n        img: \"https://i-center.by/images/o/apple-macbook-pro-13-m2-2022-mneh3_1.jpg\",\r\n      },\r\n    ],\r\n    cart: [],\r\n    showEditModal: false,\r\n    currentProduct: {},\r\n    showCartModal: false,\r\n  },\r\n  (builder) =>\r\n    builder\r\n      .addCase(addToCart, (state, action) => ({\r\n        ...state,\r\n        cart: [\r\n          ...state.cart.filter((product) => product.id !== action.payload.id),\r\n          {\r\n            ...action.payload,\r\n            amount: ~~action.payload.amount + 1\r\n          },\r\n        ],\r\n      }))\r\n      .addCase(removeFromCart, (state, action) => ({\r\n        ...state,\r\n        cart: state.cart.filter((product) => product.id !== action.payload.id),\r\n      }))\r\n      .addCase(toggleEditModal, (state) => ({\r\n        ...state,\r\n        showEditModal: !state.showEditModal,\r\n      }))\r\n      .addCase(setCurrentProduct, (state, action) => ({\r\n        ...state,\r\n        currentProduct: action.payload,\r\n      }))\r\n      .addCase(changeProducts, (state, action) => ({\r\n        ...state,\r\n        products: [\r\n          ...state.products.filter((elt) => elt.id !== action.payload.id),\r\n          action.payload,\r\n        ].sort((a, b) => {\r\n          if (a.id > b.id) {\r\n            return 1;\r\n          }\r\n          if (a.id < b.id) {\r\n            return -1;\r\n          }\r\n          return 0;\r\n        }),\r\n      }))\r\n      .addCase(deleteProduct, (state, action) => ({\r\n        ...state,\r\n        products: [\r\n          state.products.filter((product) => product.id !== action.payload.id),\r\n        ],\r\n      }))\r\n      .addCase(toggleCartModal, (state) => ({\r\n        ...state,\r\n        showCartModal: !state.showCartModal,\r\n      }))\r\n      .addCase(changeAmountInCart, (state, action) => ({\r\n        ...state,\r\n        cart: [\r\n          ...state.cart.slice(\r\n            0,\r\n            state.cart.indexOf(\r\n              state.cart.find((product) => product.id === action.payload.id)\r\n            )\r\n          ),\r\n          action.payload,\r\n          ...state.cart.slice(\r\n            state.cart.indexOf(\r\n              state.cart.find((product) => product.id === action.payload.id)\r\n            ) + 1,\r\n            state.cart.length\r\n          ),\r\n        ],\r\n      }))\r\n);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}