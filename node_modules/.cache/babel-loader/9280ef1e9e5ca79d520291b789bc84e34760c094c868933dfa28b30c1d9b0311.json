{"ast":null,"code":"import { createReducer } from \"@reduxjs/toolkit\";\nimport { setContact, removeContact, filterContacts } from \"./contactsActions\";\nimport axios from \"axios\";\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\nconst getUsers = createAsyncThunk(\"contacts/getContacts\", async () => {\n  const response = await axios.get(\"https://6400bd3663e89b0913b5f740.mockapi.io/contacts/:1\");\n  return response.data;\n});\nconst contactsReducer = createReducer({\n  contacts: {\n    items: [],\n    filter: \"\",\n    loading: false,\n    error: null\n  }\n}, builder => {\n  builder.addCase(setContact, (state, action) => ({\n    ...state,\n    contacts: {\n      ...state.contacts,\n      items: state.contacts.items.concat(action.payload.filter(contact => !state.contacts.items.some(preloaded => preloaded.id === contact.id)))\n    }\n  })).addCase(removeContact, (state, action) => ({\n    ...state,\n    contacts: {\n      ...state.contacts,\n      items: action.payload\n    }\n  })).addCase(filterContacts, (state, action) => ({\n    ...state,\n    contacts: {\n      ...state.contacts,\n      filter: action.payload\n    }\n  })).addCase(getUsers.pending, (state, action) => {\n    return {\n      ...state,\n      contacts: {\n        ...state.contacts,\n        loading: true\n      }\n    };\n  }).addCase(getUsers.fulfilled, (state, action) => {\n    return {\n      ...state,\n      contacts: {\n        ...state.contacts,\n        items: action.payload,\n        loading: false\n      }\n    };\n  }).addCase(getUsers.rejected, (state, action) => {\n    return {\n      ...state,\n      contacts: {\n        ...state.contacts,\n        loading: false,\n        error: action.error.message\n      }\n    };\n  }).addDefaultCase((state, action) => state);\n});\nexport { contactsReducer, getUsers };","map":{"version":3,"names":["createReducer","setContact","removeContact","filterContacts","axios","createAsyncThunk","getUsers","response","get","data","contactsReducer","contacts","items","filter","loading","error","builder","addCase","state","action","concat","payload","contact","some","preloaded","id","pending","fulfilled","rejected","message","addDefaultCase"],"sources":["C:/study/курсы/react/homework-with-router/src/homework-6/contactsReducer.js"],"sourcesContent":["import { createReducer } from \"@reduxjs/toolkit\";\r\nimport {\r\n  setContact,\r\n  removeContact,\r\n  filterContacts,\r\n} from \"./contactsActions\";\r\nimport axios from \"axios\";\r\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\nconst getUsers = createAsyncThunk(\"contacts/getContacts\", async () => {\r\n  const response = await axios.get(\r\n    \"https://6400bd3663e89b0913b5f740.mockapi.io/contacts/:1\"\r\n  );\r\n  return response.data;\r\n});\r\n\r\nconst contactsReducer = createReducer(\r\n  {\r\n    contacts: {\r\n      items: [],\r\n      filter: \"\",\r\n      loading: false,\r\n      error: null,\r\n    },\r\n  },\r\n  (builder) => {\r\n    builder\r\n      .addCase(setContact, (state, action) => ({\r\n        ...state,\r\n        contacts: {\r\n          ...state.contacts,\r\n          items: state.contacts.items.concat(\r\n            action.payload.filter(\r\n              (contact) =>\r\n                !state.contacts.items.some(\r\n                  (preloaded) => preloaded.id === contact.id\r\n                )\r\n            )\r\n          ),\r\n        },\r\n      }))\r\n      .addCase(removeContact, (state, action) => ({\r\n        ...state,\r\n        contacts: {\r\n          ...state.contacts,\r\n          items: action.payload,\r\n        },\r\n      }))\r\n      .addCase(filterContacts, (state, action) => ({\r\n        ...state,\r\n        contacts: {\r\n          ...state.contacts,\r\n          filter: action.payload,\r\n        },\r\n      }))\r\n      .addCase(getUsers.pending, (state, action) => {\r\n        return { ...state, contacts: { ...state.contacts, loading: true } };\r\n      })\r\n      .addCase(getUsers.fulfilled, (state, action) => {\r\n        return {\r\n          ...state,\r\n          contacts: {\r\n            ...state.contacts,\r\n            items: action.payload,\r\n            loading: false,\r\n          },\r\n        };\r\n      })\r\n      .addCase(getUsers.rejected, (state, action) => {\r\n        return {\r\n          ...state,\r\n          contacts: {\r\n            ...state.contacts,\r\n            loading: false,\r\n            error: action.error.message,\r\n          },\r\n        };\r\n      })\r\n      .addDefaultCase((state, action) => state);\r\n  }\r\n);\r\n\r\nexport { contactsReducer, getUsers };\r\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,kBAAkB;AAChD,SACEC,UAAU,EACVC,aAAa,EACbC,cAAc,QACT,mBAAmB;AAC1B,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,gBAAgB,QAAQ,kBAAkB;AAEnD,MAAMC,QAAQ,GAAGD,gBAAgB,CAAC,sBAAsB,EAAE,YAAY;EACpE,MAAME,QAAQ,GAAG,MAAMH,KAAK,CAACI,GAAG,CAC9B,yDAAyD,CAC1D;EACD,OAAOD,QAAQ,CAACE,IAAI;AACtB,CAAC,CAAC;AAEF,MAAMC,eAAe,GAAGV,aAAa,CACnC;EACEW,QAAQ,EAAE;IACRC,KAAK,EAAE,EAAE;IACTC,MAAM,EAAE,EAAE;IACVC,OAAO,EAAE,KAAK;IACdC,KAAK,EAAE;EACT;AACF,CAAC,EACAC,OAAO,IAAK;EACXA,OAAO,CACJC,OAAO,CAAChB,UAAU,EAAE,CAACiB,KAAK,EAAEC,MAAM,MAAM;IACvC,GAAGD,KAAK;IACRP,QAAQ,EAAE;MACR,GAAGO,KAAK,CAACP,QAAQ;MACjBC,KAAK,EAAEM,KAAK,CAACP,QAAQ,CAACC,KAAK,CAACQ,MAAM,CAChCD,MAAM,CAACE,OAAO,CAACR,MAAM,CAClBS,OAAO,IACN,CAACJ,KAAK,CAACP,QAAQ,CAACC,KAAK,CAACW,IAAI,CACvBC,SAAS,IAAKA,SAAS,CAACC,EAAE,KAAKH,OAAO,CAACG,EAAE,CAC3C,CACJ;IAEL;EACF,CAAC,CAAC,CAAC,CACFR,OAAO,CAACf,aAAa,EAAE,CAACgB,KAAK,EAAEC,MAAM,MAAM;IAC1C,GAAGD,KAAK;IACRP,QAAQ,EAAE;MACR,GAAGO,KAAK,CAACP,QAAQ;MACjBC,KAAK,EAAEO,MAAM,CAACE;IAChB;EACF,CAAC,CAAC,CAAC,CACFJ,OAAO,CAACd,cAAc,EAAE,CAACe,KAAK,EAAEC,MAAM,MAAM;IAC3C,GAAGD,KAAK;IACRP,QAAQ,EAAE;MACR,GAAGO,KAAK,CAACP,QAAQ;MACjBE,MAAM,EAAEM,MAAM,CAACE;IACjB;EACF,CAAC,CAAC,CAAC,CACFJ,OAAO,CAACX,QAAQ,CAACoB,OAAO,EAAE,CAACR,KAAK,EAAEC,MAAM,KAAK;IAC5C,OAAO;MAAE,GAAGD,KAAK;MAAEP,QAAQ,EAAE;QAAE,GAAGO,KAAK,CAACP,QAAQ;QAAEG,OAAO,EAAE;MAAK;IAAE,CAAC;EACrE,CAAC,CAAC,CACDG,OAAO,CAACX,QAAQ,CAACqB,SAAS,EAAE,CAACT,KAAK,EAAEC,MAAM,KAAK;IAC9C,OAAO;MACL,GAAGD,KAAK;MACRP,QAAQ,EAAE;QACR,GAAGO,KAAK,CAACP,QAAQ;QACjBC,KAAK,EAAEO,MAAM,CAACE,OAAO;QACrBP,OAAO,EAAE;MACX;IACF,CAAC;EACH,CAAC,CAAC,CACDG,OAAO,CAACX,QAAQ,CAACsB,QAAQ,EAAE,CAACV,KAAK,EAAEC,MAAM,KAAK;IAC7C,OAAO;MACL,GAAGD,KAAK;MACRP,QAAQ,EAAE;QACR,GAAGO,KAAK,CAACP,QAAQ;QACjBG,OAAO,EAAE,KAAK;QACdC,KAAK,EAAEI,MAAM,CAACJ,KAAK,CAACc;MACtB;IACF,CAAC;EACH,CAAC,CAAC,CACDC,cAAc,CAAC,CAACZ,KAAK,EAAEC,MAAM,KAAKD,KAAK,CAAC;AAC7C,CAAC,CACF;AAED,SAASR,eAAe,EAAEJ,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}